<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta content="ie=edge" http-equiv="x-ua-compatible">
    <title>LibroRed</title>
    <meta content="Share your books" name="description">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="/images/favicon.png" rel="shortcut icon" type="image/png">
    <!-- Place favicon.ico in the root directory -->
    <!-- all css here -->
    <!-- bootstrap v3.3.7 css -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <!-- owl.carousel.2.0.0-beta.2.4 css -->
    <link href="/css/owl.carousel.min.css" rel="stylesheet">
    <!-- font-awesome v4.6.3 css -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <!-- flaticon.css -->
    <link href="/css/flaticon.css" rel="stylesheet">
    <!-- jquery-ui.css -->
    <link href="/css/jquery-ui.css" rel="stylesheet">
    <!-- metisMenu.min.css -->
    <link href="/css/metisMenu.min.css" rel="stylesheet">
    <!-- swiper.min.css -->
    <link href="/css/swiper.min.css" rel="stylesheet">
    <!-- style css -->
    <link href="/css/styles.css" rel="stylesheet">
    <!-- responsive css -->
    <link href="/css/responsive.css" rel="stylesheet">
    <!-- modernizr css -->
    <script src="/js/vendor/modernizr-2.8.3.min.js"></script>
</head>

<body>
<!--Start Preloader-->
<div class="preloader-wrap">
    <div class="spinner"></div>
</div>

<!-- header-area start -->
<header class="header-area">
    <div class="header-top bg-2">
        <div class="fluid-container">
            <div class="row">
                <div class="col-md-6 col-12">
                    <ul class="d-flex header-contact">
                        {{^logged}}
                        <div class="logo">
                            <a href="index.html">
                                <img alt="LibroRed" src="/images/logo.png">
                            </a>
                        </div>
                        <li><i>Share your books</i></li>
                        {{/logged}}
                        {{#logged}}
                        <div class="logo">
                            <a href="index.html">
                                <img alt="" src="/images/logo.png">
                            </a>
                        </div>
                        <li><i>Hello {{name}}</i></li>
                        {{/logged}}
                    </ul>
                </div>
                <div class="col-md-6 col-12">
                    <ul class="d-flex account_login-area">
                        {{^logged}}
                            <li>
                                <a href="login.html"> Login </a>
                            </li>
                            <li>
                                <a href="register.html"> Register </a>
                            </li>
                        {{/logged}}
                        {{#logged}}
                            <li>
                                <a href="javascript:void(0);"><i class="fa fa-user"></i> My Account <i
                                        class="fa fa-angle-down"></i></a>
                                <ul class="dropdown_style">
                                    <li><a href="book.html">My Books</a></li>
                                    <li><a href="loan.html">My Loans</a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <form action="/logout" method="post" class="d-inline">
                                    <button class="btn btn-primary btn-nowrap" type="submit">Log Out</button>
                                    <input type="hidden" name="_csrf" value="{{token}}" />
                                </form>
                            </li>
                            {{#admin}}
                            <li>
                                <a href="admin.html"> Admin Panel </a>
                            </li>
                            {{/admin}}
                        {{/logged}}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- header-area end -->

<!-- product-area start -->
<div class="product-area">
    <div class="fluid-container">
        <div class="row">
            <div class="col-12">
                <div class="section-title">
                    {{^logged}}
                    <h2>These Books are Waiting to be Shared</h2>
                    {{/logged}}
                    {{#logged}}
                    <h2>Our Book Selection</h2>
                    {{/logged}}
                    <img alt="" src="/images/section-title.png">
                </div>
            </div>
        </div>
        <ul class="row" id="book-list">
            {{#books}}
            <li class="col-xl-3 col-lg-4 col-sm-6 col-12 book-item">
                <div class="product-wrap">
                    <div class="product-img">
                        <img alt="{{title}}" src="{{cover_pic}}">
                    </div>
                    <div class="product-content">
                        <h3><a href="single-product.html">{{title}}</a></h3>
                        <p class="pull-left">{{author}}</p>
                    </div>
                </div>
            </li>
            {{/books}}
        </ul>
        <div class="text-center mt-4">
            <div id="loading-spinner" style="display: none;">
                <img src="/images/spinner.gif" alt="Loading..." width="40">
            </div>
            <button id="load-more" class="loadmore-btn">Load More</button>
        </div>
    </div>
</div>
<!-- product-area end -->

<!-- .footer-area start -->
<div class="footer-area">
    <div class="footer-top">
        <div class="container">
            <div class="footer-top-item">
                <div class="row">
                    <div class="col-lg-12 col-12">
                        <div class="footer-top-text text-center">
                            <ul>
                                <li><a href="home.html">home</a></li>
                                <li>LIBRORED</li>
                                <li>SHARE YOUR BOOKS</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <div class="container">
            <div class="row">
                <div class="col-lg-2 col-md-3 col-sm-12">
                </div>
                <div class="col-lg-4 col-md-8 col-sm-12">
                    <div class="footer-content">
                        <p>LibroRed is a student project</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-12">
                    <div class="footer-reserved">
                        <ul>
                            <li>2025 URJC - DAW - EQUIPO 13</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- .footer-area end -->

<!-- Modal area start
<div class="modal fade" id="exampleModalCenter" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-body d-flex">
                <div class="product-single-img w-50">
                    <img alt="" src="/images/product/product-details.jpg">
                </div>
                <div class="product-single-content w-50">
                    <h3>Pure Nature Hohey</h3>
                    <div class="rating-wrap fix">
                        <span class="pull-left">$219.56</span>
                        <ul class="rating pull-right">
                            <li><i class="fa fa-star"></i></li>
                            <li><i class="fa fa-star"></i></li>
                            <li><i class="fa fa-star"></i></li>
                            <li><i class="fa fa-star"></i></li>
                            <li><i class="fa fa-star"></i></li>
                            <li>(05 Customar Review)</li>
                        </ul>
                    </div>
                    <p>On the other hand, we denounce with righteous indignation and dislike men who are so beguiled and
                        demoralized by the charms of pleasure of the moment, so blinded by desire denounce with
                        righteous indignation</p>
                    <ul class="input-style">
                        <li class="quantity cart-plus-minus">
                            <input type="text" value="1"/>
                        </li>
                        <li><a href="cart.html">Add to Cart</a></li>
                    </ul>
                    <ul class="cetagory">
                        <li>Categories:</li>
                        <li><a href="#">Honey,</a></li>
                        <li><a href="#">Olive Oil</a></li>
                    </ul>
                    <ul class="socil-icon">
                        <li>Share :</li>
                        <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                        <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                        <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
 Modal area start -->

<!-- jquery latest version -->
<script src="/js/vendor/jquery-2.2.4.min.js"></script>
<!-- bootstrap js -->
<script src="/js/bootstrap.min.js"></script>
<!-- owl.carousel.2.0.0-beta.2.4 css -->
<script src="/js/owl.carousel.min.js"></script>
<!-- scrollup.js -->
<script src="/js/scrollup.js"></script>
<!-- isotope.pkgd.min.js -->
<script src="/js/isotope.pkgd.min.js"></script>
<!-- imagesloaded.pkgd.min.js -->
<script src="/js/imagesloaded.pkgd.min.js"></script>
<!-- jquery.zoom.min.js -->
<script src="/js/jquery.zoom.min.js"></script>
<!-- countdown.js -->
<script src="/js/countdown.js"></script>
<!-- swiper.min.js -->
<script src="/js/swiper.min.js"></script>
<!-- metisMenu.min.js -->
<script src="/js/metisMenu.min.js"></script>
<!-- mailchimp.js -->
<script src="/js/mailchimp.js"></script>
<!-- jquery-ui.min.js -->
<script src="/js/jquery-ui.min.js"></script>
<!-- main js -->
<script src="/js/scripts.js"></script>

<!-- Pagination Script Using AJAX-->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        let bookList = document.getElementById("book-list");
        let loadMoreBtn = document.getElementById("load-more");
        let spinner = document.getElementById("loading-spinner");
        let itemsPerPage = 10;
        let currentPage = 1;

        function fetchNextBooks() {
            // Show spinner while loading
            spinner.style.display = "block";
            loadMoreBtn.style.display = "none";

            // Fetch new books via AJAX
            fetch(`/api/books?page=${currentPage}&size=${itemsPerPage}`)
                .then(response => response.text()) // Expect HTML response from server
                .then(data => {
                    // Insert new books into the existing book list
                    bookList.insertAdjacentHTML("beforeend", data);

                    // Hide spinner after loading
                    spinner.style.display = "none";
                    loadMoreBtn.style.display = "block";

                    // Update page counter
                    currentPage++;

                    // Hide button if no more books are available
                    if (data.trim() === "") {
                        loadMoreBtn.style.display = "none";
                    }
                })
                .catch(error => {
                    console.error("Error loading more books:", error);
                    spinner.style.display = "none"; // Ensure spinner hides on error
                    loadMoreBtn.style.display = "block"; // Keep button visible for retry
                });
        }

        // Load first batch automatically
        fetchNextBooks();

        // Click event for "Load More"
        loadMoreBtn.addEventListener("click", function () {
            fetchNextBooks();
        });
    });
</script>

</body>

</html>