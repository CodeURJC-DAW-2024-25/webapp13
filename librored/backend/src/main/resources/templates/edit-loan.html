{{> header}}

<div class="container mt-5">
    <h2 class="text-center">Edit Loan</h2>
    <form action="/admin/loans/edit/{{loan.id}}" method="post">
        <input type="hidden" name="_csrf" value="{{_csrf.token}}">
        <div class="form-group">
            <label>Book</label>
            <p>Current: <strong>{{loan.book.title}}</strong></p>
            <select name="book.id" class="form-control">
                {{#books}}
                <option value="{{id}}" {{#loan.book.id}}{{^loan.book.id}}{{
                /loan.book.id}}{{#id}}{{^id}}{{/id}}selected{{/id}}{{/loan.book.id}}>{{title}}</option>
                {{/books}}
            </select>
        </div>

        <div class="form-group">
            <label>Lender</label>
            <p>Current: <strong>{{loan.lender.username}}</strong></p>
            <select name="lender.id" class="form-control">
                {{#users}}
                <option value="{{id}}" {{#loan.lender}}{{#id}}{{^id}}{{
                /id}}selected{{/id}}{{/loan.lender}}>{{username}}</option>
                {{/users}}
            </select>
        </div>

        <div class="form-group">
            <label>Borrower</label>
            <p>Current: <strong>{{loan.borrower.username}}</strong></p>
            <select name="borrower.id" class="form-control">
                {{#users}}
                <option value="{{id}}" {{#loan.borrower}}{{#id}}{{^id}}{{
                /id}}selected{{/id}}{{/loan.borrower}}>{{username}}</option>
                {{/users}}
            </select>
        </div>

        <div class="form-group">
            <label>Start Date</label>
            <p>Current: <strong>{{loan.startDate}}</strong></p>
            <input type="date" name="startDate" class="form-control">
        </div>

        <div class="form-group">
            <label>End Date</label>
            <p>Current: <strong>{{loan.endDate}}</strong></p>
            <input type="date" name="endDate" class="form-control">
        </div>

        <div class="form-group">
            <label>Status</label>
            <p>Current: <strong>{{loan.status}}</strong></p>
            <select name="status" class="form-control">
                <option value="Active" {{#loan.status}} {{#Active}}selected{{
                /Active}} {{/loan.status}}>Active</option>
                <option value="Completed" {{#loan.status}} {{#Completed}}selected{{
                /Completed}} {{/loan.status}}>Completed</option>
            </select>
        </div>

        <button type="submit" class="btn btn-success mt-3">Update Loan</button>
        <a href="/admin/loans" class="btn btn-secondary mt-3">Cancel</a>
    </form>
</div>

{{> footer}}
