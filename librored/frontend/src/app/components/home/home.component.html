<!-- books per genre graph-->
<div class="fluid-container">
    <div class="row">
        <div class="col-12">
            <div class="section-title">
                <h2>Our Genres</h2>
                <img alt="" src="/images/section-title.png">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="section-text">
                <p>Welcome to LibroRed - Your Community Book Sharing Platform</p>
                <p>Discover, share, and enjoy books with our community. Browse our collection or sign up to start lending and borrowing books.</p>
            </div>
        </div>
    </div>
</div>

<!-- Additional welcome content -->
<div class="fluid-container mt-4">
    <div class="row">
        <div class="col-md-12 text-center">
            <div class="welcome-section">
                <h3>Join Our Community</h3>
                <p>Share your books with other readers and discover new titles.</p>
                <div class="action-buttons mt-3">
                    <a routerLink="/login" class="btn btn-primary me-3">Login</a>
                    <a routerLink="/register" class="btn btn-outline-primary">Register</a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Books Collection Section -->
<div class="container mt-5">
    <div class="row">
        <div class="col-12">
            <div class="section-title text-center">
                <h2>Our Book Collection</h2>
                <img alt="" src="/images/section-title.png">
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="loading" class="text-center">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <p>Loading books...</p>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
        {{ errorMessage }}
        <button type="button" class="btn btn-link" (click)="loadBooks()">Try Again</button>
    </div>

    <!-- Books Grid -->
    <div *ngIf="!loading && !errorMessage" class="row">
        <div *ngFor="let book of books" class="col-md-3 col-sm-6 mb-4">
            <div class="card h-100 shadow-sm">
                <img [src]="getImageUrl(book)" class="card-img-top" [alt]="book.title"
                     style="height: 200px; object-fit: cover; background-color: #f8f9fa;">

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ book.title }}</h5>
                    <p class="card-text"><strong>Author:</strong> {{ book.author }}</p>
                    <p class="card-text"><strong>Genre:</strong> {{ book.genre | titlecase }}</p>
                    <p class="card-text flex-grow-1">{{ book.description }}</p>

                    <!-- Owner Info -->
                    <div class="mt-auto">
                        <small class="text-muted">
                            <strong>Owner:</strong> {{ book.owner?.username || 'Unknown' }}
                        </small>
                    </div>
                </div>
            </div>
        </div>

        <!-- No Books Message -->
        <div *ngIf="books.length === 0" class="col-12">
            <div class="alert alert-info text-center">
                <h5>No Books Available</h5>
                <p>There are no books in the collection yet.</p>
                <a routerLink="/register" class="btn btn-primary">Join to Add Books</a>
            </div>
        </div>
    </div>
</div>